(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405,563],{75557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(51870)}])},51870:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var r=n(47568),a=n(70655),i=n(85893),s=n(2670),o=JSON.parse('{"Mt":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"fetchNfts","outputs":[{"components":[{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"imageUrl","type":"string"},{"internalType":"string","name":"encryptedDescription","type":"string"},{"internalType":"string","name":"encryptedSymmetricKey","type":"string"}],"internalType":"struct NFT.nft[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"imageUrl","type":"string"},{"internalType":"string","name":"encryptedDescription","type":"string"},{"internalType":"string","name":"encryptedSymmetricKey","type":"string"}],"name":"mintNft","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"}]}'),u="0xb02f10543f4069ddF2D656B5D3098A642Bc28071",c=o.Mt,l=n(67976),d=n(14924),p=n(26042),y=n(69396),m=n(67294),f=n(51438),g=n(52951),h=n(83666),b=n.n(h),x=new(b()).LitNodeClient,v="fuji",T=[{contractAddress:"",standardContractType:"",chain:v,method:"eth_getBalance",parameters:[":userAddress","latest"],returnValueTest:{comparator:">=",value:"100000000000000000"}},],w=new(function(){function e(){(0,f.Z)(this,e),(0,d.Z)(this,"litNodeClient",void 0)}return(0,g.Z)(e,[{key:"connect",value:function(){var e=this;return(0,r.Z)(function(){return(0,a.__generator)(this,function(t){switch(t.label){case 0:return[4,x.connect()];case 1:return t.sent(),e.litNodeClient=x,[2]}})})()}},{key:"encryptText",value:function(e){var t=this;return(0,r.Z)(function(){var n,r,i,s,o,u;return(0,a.__generator)(this,function(a){switch(a.label){case 0:if(t.litNodeClient)return[3,2];return[4,t.connect()];case 1:a.sent(),a.label=2;case 2:return[4,b().checkAndSignAuthMessage({chain:v})];case 3:return n=a.sent(),[4,b().encryptString(e)];case 4:return i=(r=a.sent()).encryptedString,s=r.symmetricKey,[4,t.litNodeClient.saveEncryptionKey({accessControlConditions:T,symmetricKey:s,authSig:n,chain:v})];case 5:var c,l;return o=a.sent(),u={},[4,(c=i,l=new FileReader,l.readAsDataURL(c),new Promise(function(e){l.onloadend=function(){e(l.result)}}))];case 6:return[2,(u.encryptedString=a.sent(),u.encryptedSymmetricKey=b().uint8arrayToString(o,"base16"),u)]}})})()}},{key:"decryptText",value:function(e,t){var n=this;return(0,r.Z)(function(){var r,i,s,o;return(0,a.__generator)(this,function(a){switch(a.label){case 0:if(n.litNodeClient)return[3,2];return[4,n.connect()];case 1:a.sent(),a.label=2;case 2:return[4,b().checkAndSignAuthMessage({chain:v})];case 3:return r=a.sent(),[4,n.litNodeClient.getEncryptionKey({accessControlConditions:T,toDecrypt:t,chain:v,authSig:r})];case 4:return i=a.sent(),[4,fetch(e)];case 5:return[4,a.sent().blob()];case 6:return s=a.sent(),console.log(s),[4,b().decryptString(s,i)];case 7:return[2,a.sent()]}})})()}}]),e}());function N(e){var t=e.contract,n=(0,m.useState)({name:"",imageUrl:"",description:""}),s=n[0],o=n[1];function u(){return(u=(0,r.Z)(function(){var e,n,r,i,u,c;return(0,a.__generator)(this,function(a){switch(a.label){case 0:return e=s.name,n=s.imageUrl,r=s.description,console.log("name, imageUrl, description"+e,n,r),[4,w.encryptText(r)];case 1:return u=(i=a.sent()).encryptedString,c=i.encryptedSymmetricKey,[4,t.mintNft(e,n,u,c)];case 2:return a.sent(),o({name:"",imageUrl:"",description:""}),[2]}})})).apply(this,arguments)}return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"flex justify-center",children:(0,i.jsxs)("div",{className:"block p-6 rounded-lg shadow-lg bg-white max-w-sm",children:[(0,i.jsx)("h5",{className:"text-gray-900 text-xl leading-tight font-medium mb-2",children:"Mint NFT with Encrypted Description"}),[{label:"Name",input:"name"},{label:"Image URL",input:"imageUrl"},{label:"Encrypted Description",input:"description"}].map(function(e){var t=e.label,n=e.input;return(0,i.jsxs)("div",{class:"form-group mb-3",children:[(0,i.jsx)("label",{className:"form-label inline-block mb-2 text-gray-700",children:t},t),(0,i.jsx)("input",{type:"text",className:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none ",placeholder:"...",value:s[n],onChange:function(e){o((0,y.Z)((0,p.Z)({},s),(0,d.Z)({},n,e.target.value)))}})]},t)}),(0,i.jsx)("button",{type:"button",className:" inline-block px-6 py-2.5 bg-blue-600 text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out",onClick:function(){return u.apply(this,arguments)},children:"Mint"})]})})})}function j(e){var t=e.data,n=(0,m.useState)(t.encryptedDescription.slice(-10)||""),s=n[0],o=n[1];function u(){return(u=(0,r.Z)(function(){var e,n,r,i;return(0,a.__generator)(this,function(a){switch(a.label){case 0:e=t.encryptedDescription,n=t.encryptedSymmetricKey,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,w.decryptText(e,n)];case 2:return r=a.sent(),[3,4];case 3:return r="incorrect_access_control_conditions"===a.sent().errorCode?"You should have at least 0.1 AVAX to decrypt the description! Try again.":"Some unexpected error occurred. Please try again!",[3,4];case 4:return o(r),[2]}})})).apply(this,arguments)}return(0,i.jsxs)("div",{className:"rounded-lg shadow-lg bg-white max-w-sm w-full",children:[(0,i.jsx)("a",{href:"#!",children:(0,i.jsx)("img",{className:"rounded-t-lg mx-auto",src:t.imageUrl,alt:""})}),(0,i.jsxs)("div",{className:"p-6",children:[(0,i.jsx)("h5",{className:"text-gray-900 text-xl font-medium mb-2",children:t.name}),(0,i.jsx)("p",{className:"text-gray-700 text-base mb-4 overflow-auto",children:s}),(0,i.jsx)("button",{type:"button",onClick:function(){return u.apply(this,arguments)},className:" inline-block px-6 py-2.5 bg-blue-600 text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out",children:"Decrypt Description"})]})]})}function _(e){var t=e.contract,n=(0,m.useState)([]),r=n[0],a=n[1],s=(0,l.do)({address:null==t?void 0:t.address,abi:c,functionName:"fetchNfts",onSuccess:function(e){o(e)}}),o=function(e){for(var t=[],n={},r=e.length-1;r>-1;r--){var i,s=e[r],o=s.name,u=s.imageUrl;n={name:o,imageUrl:u,encryptedDescription:s.encryptedDescription,encryptedSymmetricKey:s.encryptedSymmetricKey},t.push(n)}a(t)};return s.error?(0,i.jsx)("div",{children:error}):s.isFetching||s.isLoading?(0,i.jsx)("div",{children:"Loading ..."}):(0,i.jsxs)("div",{className:"my-5 grid grid-cols-2 auto-rows-auto gap-10 justify-items-center",children:[(0,i.jsx)("h2",{className:"font-medium leading-tight text-3xl col-span-2 text-center",children:"Gallery"}),r.map(function(e,t){return(0,i.jsx)(j,{data:e},t)})]})}function k(){var e=(0,l.yL)(),t=(0,l.mx)(),n=t.data;t.isError,t.isLoading;var o=(0,l.cq)({address:u,abi:c,signerOrProvider:n||e});function d(){return(d=(0,r.Z)(function(){var e,t;return(0,a.__generator)(this,function(n){switch(n.label){case 0:return[4,o.symbol()];case 1:return e=n.sent(),[4,o.fetchNfts()];case 2:return t=n.sent(),console.log(e),console.log(t),[2]}})})).apply(this,arguments)}return(!function(){return d.apply(this,arguments)}(),o)?(0,i.jsxs)("div",{className:"p-8",children:[(0,i.jsx)("div",{className:"flex flex-row-reverse mb-5",children:(0,i.jsx)(s.NL,{})}),(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)("h3",{class:"text-6xl leading-tight mb-4 pb-4 border-b text-center",children:"This is For You!"}),(0,i.jsx)(N,{contract:o}),(0,i.jsx)(_,{contract:o}),(0,i.jsxs)("h4",{class:"my-5 font-medium leading-tight text-xl text-center",children:["Contract Address - ",(0,i.jsx)("a",{className:"underline text-blue-600 hover:text-blue-700 transition duration-300 ease-in-out mb-4",target:"_blank",rel:"noreferrer",href:"https://testnet.snowtrace.io/address/".concat(u),children:u})]}),(0,i.jsx)("a",{className:"text-center",target:"_blank",rel:"noreferrer",href:"https://github.com/colinsteidtmann/calhacks/tree/main/contracts",children:(0,i.jsx)("img",{src:"https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png",className:"w-10 h-10"})})]})]}):(0,i.jsx)("div",{children:"Loading ..."})}},35883:function(){},36563:function(){},88924:function(){},55024:function(){}},function(e){e.O(0,[592,194,70,585,774,888,179],function(){return e(e.s=75557)}),_N_E=e.O()}]);